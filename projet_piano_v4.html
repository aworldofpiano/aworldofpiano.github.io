<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'/>
    <title>Le monde en piano</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
    integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
    crossorigin=""></script>
    <script src="https://unpkg.com/parse/dist/parse.min.js"></script
    
    <style>
        @font-face{
            font-family:'quicksand';
            src: url('quicksand.eot');
            src:url('quicksand.tt') format('truetype'),
                url('quicksand.svg#Quicksandbold') format('svg'),
                url('quicksand.woff') format('woff')
        }
        
    .uiheader{color:rgb(61, 10, 10);text-align:center;font-size:500%;font-family:'quicksand', sans-serif;font-weight:bolder;margin-bottom:0%;}
    .uiheader2{text-align:center;font-family:'quicksand';font-size:200%;margin-top:0%;font-weight:300;}
    body{background-color:rgb(197, 199, 255); }
    .carte{width:90%;height:750px;margin-left:auto;margin-right:auto;border:solid 5px rgb(17, 12, 54); }
    .rating a {
        color: #aaa;
        text-decoration: none;
        font-size: 3em;
        transition: color .4s;
        float:right;
            }
            .rating a:hover ~ a,
            .rating a:focus ~ a  {
            color: rgb(255, 240, 28);
            cursor: pointer;
            }          
             
    </style>
    <script src="jquery.js">
    </script>

    

</head>

<body>

    
    
    <div class ="uicontainer" >
        <div class="titre">
            <h1 class='uiheader'>Le monde en piano</h1>
            <h2 class='uiheader2'> Ou jouer du piano librement ?</h2>
            
        </div>

        <div class="rating">

            <a href="#5" title="Donner 5 étoiles">☆</a>
            <a href="#4" title="Donner 4 étoiles">☆</a>
            <a href="#3" title="Donner 3 étoiles">☆</a>
            <a href="#2" title="Donner 2 étoiles">☆</a>
            <a href="#1" title="Donner 1 étoile">☆</a>

            

        </div>

    
        <div id="mapid" div class ="carte"> </div>

        <script>
                window.onload = function(){

                    Parse.initialize("uW4FPlOmWyjD4qqeXFE867k7ValrkvOa5hl3phMs", "6nYyBiqUP739fvt3cN0kfhgUK1gQxc78vMVORPFJ");
                    Parse.serverURL = "https://parseapi.back4app.com/";

                    
        
                    console.log('page chargée');
                    var mymap = L.map('mapid').setView([46.342124, 2.603033], 5);
        
                    var tileStreets = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                        maxZoom: 18,
                        id: 'mapbox.streets',
                        accessToken: 'pk.eyJ1IjoibGFpc3NlcGF1bCIsImEiOiJjam5ocTByd2gwZjU2M3BvM3R5NndidThkIn0.DZIEmZkAfnn7s3fTWv0JHA'
                    }).addTo(mymap);
                    

                    
                    
                    /*
                        Ici il faut faire une boucle, c'est plus propre
                        On appelle .forEach sur un tableau d'objet, et 
                        pour chaque objet on va créer un marker
                    */
                    [
                        {
                            coor: [45.748556, 4.826008],
                            description: '<b>Gare de Lyon Perrache</b>',
                        },
                        {
                            coor: [45.760635, 4.861607],
                            description: '<b>Gare de Lyon Part-Dieu</b>',
                        },
                        {
                            coor: [45.746671, 4.826623],
                            description: '<b>Université Catholique de Lyon</b><br>Campus Saint-Paul</br>',
                        },
                        {
                            coor: [45.779974, 4.849042],
                            description: '<b>Parc de la Tête D\'Or</b>',
                        },
                        {
                            coor: [43.604916, 3.880982],
                            description: "<b>Gare de Montpellier Saint-Roch</b>",
                        },
                        {
                            coor: [43.604916, 3.880982],
                            description: "<b>Gare de Montpellier Saint-Roch</b>",
                        },
                        {
                            coor: [43.611542, 1.454247],
                            description: "<b>Gare de Toulouse Matabiau</b>",
                        },
                        {
                            coor: [44.826642, -0.555606],
                            description: "<b>Gare de Bordeaux Saint-Jean</b><br>Ouais</br>",
                        },
                        {
                            coor: [47.389332, 0.694518],
                            description: "<b>Gare de Tours</b>",
                        },
                        {
                            coor: [48.103559, -1.672127],
                            description: "<b>Gare de Rennes</b>",
                        },
                        {
                            coor: [48.844583, 2.375214],
                            description: "<b>Paris - Gare de Lyon</b>",
                        },
                        {
                            coor: [48.841376, 2.320869],
                            description: "<b>Paris - Gare Montparnasse</b>",
                        },
                        {
                            coor: [49.010017, 2.548095],
                            description: "<b>Aéroport Paris-Charles de Gaulle</b>",
                        },
                        {
                            coor: [48.689979, 6.175027],
                            description: "<b>Gare de Nancy</b><div> <img style='width:100%'' src='https://i.ytimg.com/vi/HD406tsdOuE/hqdefault.jpg', alt = 'image'/></div> ",
                        },
                    ] 
                    
                    .forEach(function(data) {
                        var marker = L.marker(data.coor).addTo(mymap);
                        marker.bindPopup("<b>" + data.description + "</b>", {minWidth: 256});
                    });
                    
                    
                    function onMapClick(e) {
                        
                        var markerByClick = L.marker([e.latlng.lat, e.latlng.lng]).addTo(mymap);

                        var description = prompt("Quel est cet endroit ?");
                        markerByClick.bindPopup('<b>'+ description + '</b>', {minWidth: 256});
                        markerByClick.openPopup();

                       

                         
                        /* popup
                            .setLatLng(e.latlng)
                            .setContent(description)
                            .openOn(mymap); */
                    }

                    mymap.on('click', onMapClick);


                    
                }     
                
            </script>

            

           
    </div>
    

    
        


</body>










</html>